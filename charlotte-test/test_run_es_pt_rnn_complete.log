Starting train_SC_venv.sh-----------
Using venv (not conda)
  Sound venv:  /Users/ringger/Projects/brendan/SCIMT/venv_sound
  Copper venv: /Users/ringger/Projects/brendan/SCIMT/venv_copper
Mon Oct 13 22:19:49 MDT 2025
-------------------------------
    ###############################################
#-- #                 1) ARGUMENTS                # --#
    ###############################################
Arguments:-
    MODULE_HOME_DIR=/Users/ringger/Projects/brendan/SCIMT

    SRC=es
    TGT=pt
    PARALLEL_TRAIN=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/train.csv
    PARALLEL_VAL=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/val.csv
    PARALLEL_TEST=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/test.csv
    COGNATE_TRAIN=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt
    NO_GROUPING=true
    SC_MODEL_TYPE=RNN
    SEED=1000
    COGNATE_THRESH=0.5
    COPPERMT_DATA_DIR=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/sc_models_es_pt
    COPPERMT_DIR=/Users/ringger/Projects/brendan/SCIMT/CopperMT/CopperMT
    PARAMETERS_DIR=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/params_es_pt
    RNN_HYPERPARAMS=/Users/ringger/Projects/brendan/SCIMT/Pipeline/rnn_hyperparams
    RNN_HYPERPARAMS_ID=default
    BEAM=5
    NBEST=1
    REVERSE_SRC_TGT_COGNATES=false
    ADDITIONAL_TRAIN_COGNATES_SRC=null
    ADDITIONAL_TRAIN_COGNATES_TGT=null
    VAL_COGNATES_SRC=null
    VAL_COGNATES_TGT=null
    TEST_COGNATES_SRC=null
    TEST_COGNATES_TGT=null
    COGNATE_TRAIN_RATIO=0.8
    COGNATE_TEST_RATIO=0.1
    COGNATE_VAL_RATIO=0.1
-------------------------------




    ###############################################
#-- #     2) GET COGNATES FROM PARALLEL DATA      # --#
    ###############################################


######## 2.1 Clear and remake COGNATE_TRAIN dir ########
removing /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000
creating /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000
creating /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/cognate
creating /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign


######## 2.2 Gather parallel data from which cognates are extracted ########
MultilingualDataset READING CSV /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/train.csv
Reading all lines from /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/train.es
Reading all lines from /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/train.pt
Making unique: ('es', 'pt')
	Before unique: 100
	After unique: 100
However, we will not use the unique data by pairs.
(Will use the 'Before unique' dataset sizes)
DATA MAX_SIZE = 100
RAW DATA SIZE: 100
UPSAMPLED SIZE: 100
RETURNING SRC PATHS: ['/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/train.es']
RETURNING TGT PATHS: ['/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/train.pt']
MultilingualDataset TOTAL PAIRS: 100
MultilingualDataset READING CSV /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/val.csv
Reading all lines from /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/val.es
Reading all lines from /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/val.pt
Making unique: ('es', 'pt')
	Before unique: 20
	After unique: 20
However, we will not use the unique data by pairs.
(Will use the 'Before unique' dataset sizes)
DATA MAX_SIZE = 20
RAW DATA SIZE: 20
UPSAMPLED SIZE: 20
RETURNING SRC PATHS: ['/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/val.es']
RETURNING TGT PATHS: ['/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/val.pt']
MultilingualDataset TOTAL PAIRS: 20
MultilingualDataset READING CSV /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/test.csv
Reading all lines from /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/test.es
Reading all lines from /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/test.pt
Making unique: ('es', 'pt')
	Before unique: 892
	After unique: 892
However, we will not use the unique data by pairs.
(Will use the 'Before unique' dataset sizes)
DATA MAX_SIZE = 892
RAW DATA SIZE: 892
UPSAMPLED SIZE: 892
RETURNING SRC PATHS: ['/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/test.es']
RETURNING TGT PATHS: ['/Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/raw/test.pt']
MultilingualDataset TOTAL PAIRS: 892
############################
# make_SC_training_data.py #
############################
Arguments:-
	-train_csv: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/train.csv
	-val_csv: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/val.csv
	-test_csv: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/data/csv/test.csv
	-src_out: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/cognate/train.es
	-tgt_out: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/cognate/train.pt
	-src: es
	-tgt: pt
------------------------------



######## 2.3 Run Fast Align ########

# 2.3.1 set file path names depending on whether NO_GROUPING is set to true or false. #
NO_GROUPING has been set to true.
t/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.txt

# 2.3.2 preparing for fast align #
prepare_for_fastalign.py REVERSE=false
###########################
# prepare_for_fastlign.py #
###########################
arguments
src: '/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/cognate/train.es'
tgt: '/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/cognate/train.pt'
out: '/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/es-pt.txt'
------------------


src_tokenize=spacy_tokenize, lang: es
tgt_tokenize=spacy_tokenize, lang: pt
  0%|          | 0/1012 [00:00<?, ?it/s] 43%|████▎     | 436/1012 [00:00<00:00, 4350.69it/s]100%|██████████| 1012/1012 [00:00<00:00, 5255.51it/s]
Writing prepare_for_fastalign.py output to /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/es-pt.txt


# 2.3.3 fast_align #
ARG=i
ARG=d
ARG=o
ARG=v
INITIAL PASS 
.
expected target length = source length * 0.915668
ITERATION 1
.
  log_e likelihood: -548400
  log_2 likelihood: -791174
     cross entropy: 29.8974
        perplexity: 1e+09
      posterior p0: 0.08
 posterior al-feat: -0.165662
       size counts: 455
ITERATION 2
.
  log_e likelihood: -218675
  log_2 likelihood: -315482
     cross entropy: 11.9216
        perplexity: 3879.39
      posterior p0: 0.118996
 posterior al-feat: -0.105194
       size counts: 455
  1  model al-feat: -0.190097 (tension=4)
  2  model al-feat: -0.150415 (tension=5.69805)
  3  model al-feat: -0.134701 (tension=6.60246)
  4  model al-feat: -0.125972 (tension=7.19259)
  5  model al-feat: -0.120431 (tension=7.60814)
  6  model al-feat: -0.116651 (tension=7.91287)
  7  model al-feat: -0.113953 (tension=8.142)
  8  model al-feat: -0.111969 (tension=8.31718)
     final tension: 8.45268
ITERATION 3
.
  log_e likelihood: -119908
  log_2 likelihood: -172990
     cross entropy: 6.53706
        perplexity: 92.8651
      posterior p0: 0.0775195
 posterior al-feat: -0.0750886
       size counts: 455
  1  model al-feat: -0.110479 (tension=8.45268)
  2  model al-feat: -0.103276 (tension=9.16049)
  3  model al-feat: -0.0981562 (tension=9.72424)
  4  model al-feat: -0.094319 (tension=10.1856)
  5  model al-feat: -0.0913365 (tension=10.5702)
  6  model al-feat: -0.0889563 (tension=10.8952)
  7  model al-feat: -0.0870186 (tension=11.1725)
  8  model al-feat: -0.0854166 (tension=11.4111)
     final tension: 11.6177
ITERATION 4
.
  log_e likelihood: -106580
  log_2 likelihood: -153762
     cross entropy: 5.81045
        perplexity: 56.1204
      posterior p0: 0.0744698
 posterior al-feat: -0.0664536
       size counts: 455
  1  model al-feat: -0.0840756 (tension=11.6177)
  2  model al-feat: -0.0818804 (tension=11.9701)
  3  model al-feat: -0.080049 (tension=12.2786)
  4  model al-feat: -0.0785004 (tension=12.5506)
  5  model al-feat: -0.0771766 (tension=12.7915)
  6  model al-feat: -0.0760346 (tension=13.0059)
  7  model al-feat: -0.075042 (tension=13.1976)
  8  model al-feat: -0.0741737 (tension=13.3693)
     final tension: 13.5237
ITERATION 5 (FINAL)
.
  log_e likelihood: -103380
  log_2 likelihood: -149146
     cross entropy: 5.63603
        perplexity: 49.7293
      posterior p0: 0
 posterior al-feat: 0
       size counts: 455
ARG=i
ARG=d
ARG=o
ARG=v
ARG=r
INITIAL PASS 
.
expected target length = source length * 1.11834
ITERATION 1
.
  log_e likelihood: -606383
  log_2 likelihood: -874826
     cross entropy: 29.8974
        perplexity: 1e+09
      posterior p0: 0.08
 posterior al-feat: -0.165269
       size counts: 455
ITERATION 2
.
  log_e likelihood: -228181
  log_2 likelihood: -329195
     cross entropy: 11.2503
        perplexity: 2436.01
      posterior p0: 0.122469
 posterior al-feat: -0.101555
       size counts: 455
  1  model al-feat: -0.155077 (tension=4)
  2  model al-feat: -0.133928 (tension=5.07043)
  3  model al-feat: -0.123269 (tension=5.71788)
  4  model al-feat: -0.116893 (tension=6.15216)
  5  model al-feat: -0.112725 (tension=6.45891)
  6  model al-feat: -0.109851 (tension=6.68231)
  7  model al-feat: -0.1078 (tension=6.84822)
  8  model al-feat: -0.1063 (tension=6.97311)
     final tension: 7.06801
ITERATION 3
.
  log_e likelihood: -127284
  log_2 likelihood: -183632
     cross entropy: 6.27566
        perplexity: 77.4749
      posterior p0: 0.0815847
 posterior al-feat: -0.0766811
       size counts: 455
  1  model al-feat: -0.105186 (tension=7.06801)
  2  model al-feat: -0.0989148 (tension=7.63811)
  3  model al-feat: -0.0944825 (tension=8.08279)
  4  model al-feat: -0.091192 (tension=8.43881)
  5  model al-feat: -0.0886646 (tension=8.72903)
  6  model al-feat: -0.0866749 (tension=8.9687)
  7  model al-feat: -0.0850791 (tension=9.16858)
  8  model al-feat: -0.0837806 (tension=9.33654)
     final tension: 9.47853
ITERATION 4
.
  log_e likelihood: -113694
  log_2 likelihood: -164025
     cross entropy: 5.6056
        perplexity: 48.6915
      posterior p0: 0.079268
 posterior al-feat: -0.0669957
       size counts: 455
  1  model al-feat: -0.0827119 (tension=9.47853)
  2  model al-feat: -0.0804361 (tension=9.79286)
  3  model al-feat: -0.0785827 (tension=10.0617)
  4  model al-feat: -0.0770494 (tension=10.2934)
  5  model al-feat: -0.0757647 (tension=10.4945)
  6  model al-feat: -0.0746774 (tension=10.6699)
  7  model al-feat: -0.0737493 (tension=10.8235)
  8  model al-feat: -0.0729515 (tension=10.9586)
     final tension: 11.0777
ITERATION 5 (FINAL)
.
  log_e likelihood: -110056
  log_2 likelihood: -158778
     cross entropy: 5.42625
        perplexity: 42.9996
      posterior p0: 0
 posterior al-feat: 0
       size counts: 455


######## 2.4 Get Cognates ########

# 2.4.1 make word alignments #
NO_GROUPING=true: running make_word_alignments_no_grouping.py
make_word_alignments_no_grouping.py
arguments:
	alignments: '/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/es-pt.sym.align'
	sent_pairs: '/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/es-pt.txt'
	out: '/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.txt'
	VERBOSE: 'False'
	STOP: 'None'
---------------------


  0%|          | 0/1012 [00:00<?, ?it/s]100%|██████████| 1012/1012 [00:00<00:00, 80279.83it/s]
0 sentence pairs have a NBSP

# 2.4.2 Get cognates from word list #
make_cognate_list.py REVERSE=false
make_cognate_list.py
arguments
	word_list: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.txt
	out: None
	theta: 0.5
	src: es
	tgt: pt
-------------------


- FOUND 3019 COGNATES -




    ###############################################
#-- #      3) TRAIN SC MODEL WITH COPPER MT       # --#
    ###############################################


######## 3.1 Make cognate prediction training, validation, and test sets ########

# 3.1 if needed, make dataset splits #
Splitting cognate data /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-es.txt, /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-pt.txt
    (train:val:test) 0.8:0.1:0.1
############
# split.py #
############
Arguments:
	- data1: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-es.txt
	- data2: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-pt.txt
	- train: 0.8
	- val: 0.1
	- test: 0.1
	- seed: 1000
	- out_dir: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign
	- UNIQUE_TEST: True
----------------------

Creating file /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-es.train-s=1000.txt
Creating file /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-es.val-s=1000.txt
Creating file /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-es.test-s=1000.txt
Creating file /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-pt.train-s=1000.txt
Creating file /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-pt.val-s=1000.txt
Creating file /Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-pt.test-s=1000.txt
asserting split occurred correctly
	it passed :)
MAKING TEST SOURCE-SIDE UNIQUE

# 3.1.2 Include ADDITIONAL_TRAIN_COGNATES_SRC and ADDITIONAL_TRAIN_COGNATES_TGT in train set file paths #

# 3.1.3 Print out files for train, validation, and test sets #
Cognate training data for format_data.py is as follows:
    TRAIN_COGNATES_SRC=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-es.train-s=1000.txt
    TRAIN_COGNATES_TGT=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-pt.train-s=1000.txt
    VAL_COGNATES_SRC=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-es.val-s=1000.txt
    VAL_COGNATES_TGT=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-pt.val-s=1000.txt
    TEST_COGNATES_SRC=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-es.test-s=1000.txt
    TEST_COGNATES_TGT=/Users/ringger/Projects/brendan/SCIMT/charlotte-test/cognates_es_pt_RNN-default_S-1000/fastalign/word_list.es-pt.NG.cognates.0.5.parallel-pt.test-s=1000.txt



######## 3.2 Train CopperMT cognate prediction model ########

# 3.2.1 make directory structure for CopperMT inputs and outputs #
COPPER_DIR: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/sc_models_es_pt/es_pt_RNN-default_S-1000

creating /Users/ringger/Projects/brendan/SCIMT/charlotte-test/sc_models_es_pt/es_pt_RNN-default_S-1000
mkdir: /Users/ringger/Projects/brendan/SCIMT/charlotte-test/sc_models_es_pt: No such file or directory
